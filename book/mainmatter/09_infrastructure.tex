\chapter{Infrastructure}

\justify{}
\includegraphics{../images/cologne-cathedral-1507854_1920.jpg}

\justify{}
Software Infrastructure and Platforms are the foundations upon which our
scripts, code, and projects are founded. Infrastructure comprises the
base upon which our containers rest, and the connectivity that allows us
to communicate with them and them with each other.

\justify{}
This chapter details our ability to quickly and uniformly stand up and
tear down virtual domains and networks to connect our containers and
route their workloads. We will look at some popular cloud computing
providers to prepare to explore ways we can leverage them to our
benefit.

\justify{}
A Public Cloud Provider is a company that offers to host our containerized
projects and virtual infrastructure so we don't have to do it ourselves.

\justify{}
The virtual resources we subscribe to will be distributed across cloud
provider hardware in data centers around the world with very little
oversight or interaction from us. For example, we can choose a Region of
the world for our server instance to exist in, but we don't need to
worry about which machine or rack it's in, or even where the data center
is located.

\section{Amazon Web Services (AWS)}

\justify{}
Consider\fig{aws} which illustrates the connectivity of a basic
project using Amazon Web Services (AWS)\index{Amazon Web Services}.

\begin{figure}
  \includegraphics[scale=0.45]{../images/ddb-no-vpc-endpoint-1024x561.png}
  \caption{A simple Public Cloud configuration using AWS as a provider.}
\label{aws}
\end{figure}

\subsection{Getting Set up in AWS}

\justify{}
One of the very first things you should do (after creating an account,
that is) is to configure mutli-factor authentication (MFA)\index{multi-factor authentication}.

\justify{}
Amazon's AWS is one of the more prevalent cloud providers in terms of
popularity and simultaneously mature and ever-expanding feature set.

\subsection{Credentials}
\justify{}
Amazon Web Services (AWS) credentials are stored in a hidden directory
in your home directory called ``.aws''. The file
\textasciitilde{}/.aws/credentials should be modified to contain your
AWS access\_id and secret\_key as seen below.

\begin{mybox}{\thetcbcounter: ~/.aws/credentials}
  \lstinputlisting{code/09_infra/aws-creds.txt}
\end{mybox}

\justify{}
Do not share this file with other people. Do not check this file into
your GitHub repositories under any circumstances.

\section{Google Cloud Platform (GCP)}

\justify{}
Google Cloud Platform (GCP) is a suite of cloud computing services that
runs on the same infrastructure that Google uses internally for its
end-user products. If the
resources we allocate on GCP were a pyramid, the apex of that pyramid
would be a ``project''. A project is made up of the settings, permissions,
and other metadata that describe your application.

single: Google Cloud Platform single: GCP

\justify{}
One of the very first things you should do (after creating an account,
that is) is to configure two-factor authentication\index{two-factor authentication}
(2FA)\index{2FA}.

\justify{}
At this point you are ready to install the gcloud\index{gcloud} software development
kit (SDK) on your local machine.

\subsection{Credentials}

\justify{}
Once the gcloud SDK is installed, you are ready to set up local
credentials that allow interaction between your machine and the GCP
application programming interface (API). In other words, Google hosts a
server that you can exchange commands with to configure your GCP
projects from your local CLI.

\justify{}
GCP credentials are stored in the directory
\textasciitilde{}/.config/gcloud as a JSON file. Do not share this file
with other people. Do not check this file into your GitHub repositories
under any circumstances.

\clearpage
\subsection{Directory Structure}

\justify{}
Relevant folders and files related to our build pipeline are shown
below. The users home directory and workspace subdirectory is implied
and removed from the diagram for clarity.

\begin{figure}[!htb]
  \input{dot/infra.tex}
  \caption{IaC related files and folders.}
\label{infra}
\end{figure}
